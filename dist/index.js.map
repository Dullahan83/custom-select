{"version":3,"file":"index.js","sources":["../src/Select.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\n\r\nconst CustomSelect = styled.div`\r\n*{\r\n    margin: 0;\r\n    padding:0;\r\n    box-sizing: border-box;\r\n    scroll-behavior: ${props => props.style ? props.style.scrollBehavior : \"auto\"};\r\n}\r\n    box-sizing: border-box;\r\n    width: ${props => props.style ? props.style.width : \"100%\"};\r\n    min-width: ${props => props.style ? props.style.minWidth : \"200px\"};\r\n    position: relative;\r\n    label{\r\n        display:flex;\r\n        margin: ${props => props.style ? props.style.labelMargin : \"1rem 0 10px 0\"};\r\n        font-size: ${props => props.style ? props.style.labelFontSize : \"18px\"};\r\n    }\r\n    &:hover{\r\n        cursor:pointer;\r\n    }\r\n    .dropdown-btn{\r\n        width: 100%;\r\n        display: flex;\r\n        background-color: ${props => props.style ? props.style.buttonBackground : \"#fafafa\"} ;\r\n        padding: ${props => props.style ? props.style.generalPadding : \"8px 16px\"};\r\n        border: ${props => props.style ? props.style.buttonBorder : \"1px solid grey\"};\r\n        font-size: ${props => props.style ? props.style.fontSize : \"inherit\"};\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        position: relative;\r\n        p{\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n        }\r\n    }\r\n    \r\n    .options{\r\n        position: absolute;\r\n        overflow: hidden;\r\n        z-index: 1000;\r\n        width: 100%;\r\n        list-style: none;\r\n        border: ${props => props.style ? props.style.optionsBorder : \"1px solid grey\"};\r\n        background-color: ${props => props.style ? props.style.optionsBackground : \"white\"};\r\n        font-size: ${props => props.style ? props.style.fontSize : \"inherit\"};\r\n        font-family: inherit ;\r\n        padding:0;\r\n        max-height: ${props => props.scrollable === true && props.style ? props.style.optionsMaxHeight : \"fit-content\"};\r\n        overflow-y: ${props => props.scrollable === true ? \"scroll\" : \"hidden\"};\r\n        li:nth-of-type(${props => props.index && props.index}){\r\n            background-color: ${props => props.style ? props.style.optionsItemHoverBgColor : \"blue\"};\r\n            color: ${props => props.style ? props.style.optionsItemHoverTxtColor : \"white\"};\r\n\r\n            &:hover{\r\n                color: ${props => props.style ? props.style.optionsItemHoverTxtColor : \"white\"};\r\n            }\r\n        }\r\n        li{\r\n            overflow: hidden;\r\n            width: 100%;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            padding: ${props => props.style ? props.style.generalPadding : \"8px 16px\"};\r\n        }\r\n        li:active, li:focus{\r\n            background-color: ${props => props.style ? props.style.optionsItemHoverBgColor : \"blue\"};\r\n        }\r\n    }\r\n    .closed{\r\n        display: none;\r\n\r\n    }\r\n    .open{\r\n        display: block;\r\n        height: fit-content;\r\n    }\r\n    .dropdown-arrow{\r\n        width: 0;\r\n        height: 0;\r\n        margin-left: ${props => props.style ? \"0\" : \"30px\"};\r\n        border-left: 6px solid transparent;\r\n        border-right: 6px solid transparent;\r\n        border-top: 7px solid transparent;\r\n        border-top-color: ${props => props.style ? props.style.arrowColor : \"grey\"};\r\n        border-top-width: ${props => props.style ? props.style.arrowSize + \"px\" : \"7px\"};\r\n        border-left-width: ${props => props.style ? props.style.arrowSize - 1 + \"px\" : \"7px\"};\r\n        border-right-width: ${props => props.style ? props.style.arrowSize - 1 + \"px\" : \"7px\"};\r\n    }\r\n    .dropdown-mask{\r\n        position: absolute;\r\n        width: 100%;\r\n        background-color: transparent;\r\n        height: 100%;\r\n        left:0;\r\n    }\r\n`\r\n\r\n/**\r\n * @param {object} customStyle css property in object form : Optionnal\r\n * @param {string} idName name to be passed as component id : Mandatory, needed to correctly launch events\r\n * @param {HTMLElement} icon  html element i/img/svg : Optionnal\r\n * @param {Array} options either plain array or array of object : Mandatory in case of a select Type\r\n * @param {string} label label field text content : Optionnal\r\n * @param {boolean} scrollable change menu to a scrollable one : Optionnal\r\n * @param {number} searchTimer set a specific timer for the reset of search : Optionnal, a base timer of 1500ms is set by default  \r\n * @param {boolean} isReset props in the form of a boolean to define when comonent should be reset : Optionnal/Mandatory\r\n * @param {string} baseOption Used as the default option\r\n * @param {function} setValue setState of the parent component : Mandatory to control output of component\r\n * \r\n * @returns {Select} React component \r\n */\r\n\r\nfunction Select({ customStyle, idName, icon, options, label, scrollable, searchTimer, isReset, baseOption, setValue }) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [visibleOption, setVisibleOption] = useState(baseOption ? baseOption : options[0].name || options[0])\r\n    const [activeDescendant, setActiveDescendant] = useState(1)\r\n    const [prevActive, setPrevActive] = useState(1)\r\n    const btnRef = useRef()\r\n    const timerRef = useRef()\r\n    const menuRef = useRef()\r\n    let searchArray = []\r\n    defineSearchMaterial()\r\n\r\n    function defineSearchMaterial() {\r\n        options && options.forEach(option => {\r\n            searchArray.push(option.name ? option.name : option)\r\n        });\r\n    }\r\n\r\n    const handleClickAway = (e) => {\r\n        console.log(e.target.tagName)\r\n        if (e.target.tagName === \"HTML\" || e.target.parentNode.parentNode.id != idName) {\r\n            e.target.className != \"option\" && setActiveDescendant(prevActive)\r\n            setIsOpen(false)\r\n        }\r\n        else if (e.target.parentNode.parentNode.id === idName && e.target.className === \"dropdown-mask\") {\r\n            !isOpen && setIsOpen(prev => !prev)\r\n        }\r\n    }\r\n\r\n    function handleMouseOver(e) {\r\n        if (e.target.className === \"option\") {\r\n            e.target.dataset.key && setActiveDescendant(Number(e.target.dataset.key))\r\n        }\r\n    }\r\n\r\n    function handleKeyPress(e) {\r\n        switch (e.target.className) {\r\n            case \"dropdown-btn\":\r\n                if (e.code === \"Space\" | e.code === \"Enter\" | e.key === \" \" | e.key === \"Enter\") {\r\n                    setIsOpen(prev => !prev)\r\n                }\r\n                if (isOpen) {\r\n                    if (e.code === \"ArrowLeft\" || e.code === \"ArrowUp\" || e.key === \"ArrowLeft\" || e.key === \"ArrowUp\") {\r\n                        e.code === \"ArrowUp\" && e.preventDefault()\r\n                        e.code === \"ArrowLeft\" && e.preventDefault()\r\n                        setActiveDescendant(prev => prev > 1 ? prev - 1 : 1)\r\n                        scrollToTarget()\r\n                    }\r\n                    else if (e.code === \"ArrowRight\" | e.code === \"ArrowDown\" || e.key === \"ArrowRight\" || e.key === \"ArrowDown\") {\r\n                        e.code === \"ArrowDown\" && e.preventDefault()\r\n                        e.code === \"ArrowRight\" && e.preventDefault()\r\n                        activeDescendant < options.length && setActiveDescendant(prev => prev < options.length + 1 ? prev + 1 : prev)\r\n                        scrollToTarget()\r\n                    }\r\n                    else if (e.code === \"Space\" || e.code === \"Enter\" || e.key === \" \" || e.key === \"Enter\") {\r\n                        e.code === \"Space\" && e.preventDefault()\r\n                        e.key === \" \" && e.preventDefault()\r\n                        setPrevActive(activeDescendant)\r\n                        setVisibleOption(options[activeDescendant - 1].name || options[activeDescendant - 1])\r\n                        setIsOpen(false)\r\n                        setValue && setValue(e.target.textContent)\r\n                    }\r\n                    else if (e.code === \"Tab\" || e.key === \"Tab\" || e.code === \"Escape\" || e.key === \"Escape\") {\r\n                        setActiveDescendant(prevActive)\r\n                        setVisibleOption(options[prevActive - 1].name || options[prevActive - 1])\r\n                        setIsOpen(false)\r\n                    }\r\n                    else if (e.key.length === 1 && e.key.match(/[a-z]/i)) {\r\n                        let key = e.key\r\n                        updateLs(key)\r\n                        clearTimeout(timerRef.current)\r\n                        search()\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    function scrollToTarget(index) {\r\n        const menuOptions = document.querySelectorAll(`#${idName} ul li`)\r\n        menuOptions[index > 0 ? index - 1 : index <= 0 ? 0 : activeDescendant - 1].scrollIntoViewIfNeeded()\r\n    }\r\n\r\n    function search() {\r\n        const string = localStorage.getItem(`${idName}Search`)\r\n        const index = searchArray.findIndex(el => el.slice(0, string.length).toLowerCase() === string.toLowerCase())\r\n        console.log(index);\r\n        setActiveDescendant(index > 0 ? index + 1 : index === 0 ? 1 : activeDescendant)\r\n\r\n        timerRef.current = setTimeout(() => {\r\n            resetSearch()\r\n        }, searchTimer ? searchTimer : 1000)\r\n        scrollToTarget(index > 0 ? index + 1 : index < 0 ? activeDescendant : 1)\r\n    }\r\n    function updateLs(key) {\r\n        let string = localStorage.getItem(`${idName}Search`)\r\n        string ? string += key : string = key\r\n        localStorage.setItem(`${idName}Search`, string)\r\n    }\r\n\r\n    function resetSearch() {\r\n        localStorage.removeItem(`${idName}Search`)\r\n        clearTimeout(timerRef.current)\r\n    }\r\n\r\n    function handleClickOnItem(e, key) {\r\n        setVisibleOption((e.target.textContent))\r\n        setIsOpen(false)\r\n        setPrevActive(key)\r\n        setActiveDescendant(key)\r\n        setValue && setValue(e.target.dataset.value)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setValue && setValue(options[0].abbreviation ? options[0].abbreviation : options[0])\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        // eslint-disable-next-line no-undef\r\n        isOpen && document.addEventListener(\"click\", handleClickAway)\r\n\r\n        // eslint-disable-next-line no-undef\r\n        return () => document.removeEventListener('click', handleClickAway)\r\n    }, [isOpen])\r\n\r\n    useEffect(() => {\r\n        scrollToTarget(1)\r\n        setVisibleOption(baseOption ? baseOption : options[0].name || options[0])\r\n        setPrevActive(1)\r\n        setActiveDescendant(1)\r\n        setValue(baseOption ? baseOption : options[0].abbreviation || options[0])\r\n    }, [isReset])\r\n    return (\r\n        <CustomSelect id={idName} style={customStyle && customStyle} index={activeDescendant} scrollable={scrollable} onKeyDown={(e) => handleKeyPress(e)} onMouseOver={(e) => handleMouseOver(e)} data-value={options[activeDescendant - 1].abbreviation || options[activeDescendant - 1]}>\r\n            {label && <label htmlFor={idName + \"-btn\"} onClick={() => btnRef.current?.focus()}>{label}</label>}\r\n            <div ref={btnRef} role=\"combobox\" aria-controls={`${idName}-dropdown-menu`} aria-activedescendant={activeDescendant} aria-haspopup=\"listbox\" id={`${idName}-btn`} aria-expanded={isOpen} aria-owns={`${idName}-dropdown-menu`} className=\"dropdown-btn\" tabIndex=\"0\" ><p>{visibleOption}</p>{icon ? icon : <div className='dropdown-arrow'></div>}<span className='dropdown-mask' onClick={() => {\r\n                setIsOpen((prev) => !prev)\r\n                setActiveDescendant(prevActive)\r\n            }}></span></div>\r\n            <ul ref={menuRef} id={`${idName}-dropdown-menu`} role=\"listbox\" aria-hidden={!isOpen} className={isOpen ? \"options open\" : \"options closed\"}>\r\n                {options && options.map((option, key) => {\r\n                    return <li key={key} onClick={(e) => {\r\n                        handleClickOnItem(e, key + 1)\r\n                    }}\r\n                        data-key={key + 1} data-value={option.abbreviation || option} className=\"option\" role=\"option\" aria-selected={key + 1 === prevActive ? true : false}>{option.name || option}</li>\r\n                })}\r\n            </ul>\r\n        </CustomSelect>\r\n    )\r\n}\r\n\r\n\r\nexport default Select\r\n"],"names":["CustomSelect","styled","div","_templateObject","_taggedTemplateLiteralLoose","props","style","scrollBehavior","width","minWidth","labelMargin","labelFontSize","buttonBackground","generalPadding","buttonBorder","fontSize","optionsBorder","optionsBackground","scrollable","optionsMaxHeight","index","optionsItemHoverBgColor","optionsItemHoverTxtColor","arrowColor","arrowSize","Select","_ref","customStyle","idName","icon","options","label","searchTimer","isReset","baseOption","setValue","_useState","useState","isOpen","setIsOpen","_useState2","name","visibleOption","setVisibleOption","_useState3","activeDescendant","setActiveDescendant","_useState4","prevActive","setPrevActive","btnRef","useRef","timerRef","menuRef","searchArray","defineSearchMaterial","forEach","option","push","handleClickAway","e","console","log","target","tagName","parentNode","id","className","prev","handleMouseOver","dataset","key","Number","handleKeyPress","code","preventDefault","scrollToTarget","length","textContent","match","updateLs","clearTimeout","current","search","menuOptions","document","querySelectorAll","scrollIntoViewIfNeeded","string","localStorage","getItem","findIndex","el","slice","toLowerCase","setTimeout","resetSearch","setItem","removeItem","handleClickOnItem","value","useEffect","abbreviation","addEventListener","removeEventListener","React","createElement","onKeyDown","onMouseOver","htmlFor","onClick","_btnRef$current","focus","ref","role","tabIndex","map"],"mappings":"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"}