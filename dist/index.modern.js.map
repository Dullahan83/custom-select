{"version":3,"file":"index.modern.js","sources":["../src/Select.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\n\r\nconst CustomSelect = styled.div`\r\n*{\r\n    margin: 0;\r\n    padding:0;\r\n    box-sizing: border-box;\r\n    scroll-behavior: ${props => props.style ? props.style.scrollBehavior : \"auto\"};\r\n}\r\n    box-sizing: border-box;\r\n    width: ${props => props.style ? props.style.width : \"100%\"};\r\n    min-width: ${props => props.style ? props.style.minWidth : \"200px\"};\r\n    position: relative;\r\n    label{\r\n        display:flex;\r\n        margin: ${props => props.style ? props.style.labelMargin : \"1rem 0 10px 0\"};\r\n        font-size: ${props => props.style ? props.style.labelFontSize : \"18px\"};\r\n    }\r\n    &:hover{\r\n        cursor:pointer;\r\n    }\r\n    .dropdown-btn{\r\n        width: 100%;\r\n        display: flex;\r\n        background-color: ${props => props.style ? props.style.buttonBackground : \"#fafafa\"} ;\r\n        padding: ${props => props.style ? props.style.generalPadding : \"8px 16px\"};\r\n        border: ${props => props.style ? props.style.buttonBorder : \"1px solid grey\"};\r\n        font-size: ${props => props.style ? props.style.fontSize : \"inherit\"};\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        position: relative;\r\n        p{\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n        }\r\n    }\r\n    \r\n    .options{\r\n        position: absolute;\r\n        overflow: hidden;\r\n        z-index: 1000;\r\n        width: 100%;\r\n        list-style: none;\r\n        border: ${props => props.style ? props.style.optionsBorder : \"1px solid grey\"};\r\n        background-color: ${props => props.style ? props.style.optionsBackground : \"white\"};\r\n        font-size: ${props => props.style ? props.style.fontSize : \"inherit\"};\r\n        font-family: inherit ;\r\n        padding:0;\r\n        max-height: ${props => props.scrollable === true && props.style ? props.style.optionsMaxHeight : \"fit-content\"};\r\n        overflow-y: ${props => props.scrollable === true ? \"scroll\" : \"hidden\"};\r\n        li:nth-of-type(${props => props.index && props.index}){\r\n            background-color: ${props => props.style ? props.style.optionsItemHoverBgColor : \"blue\"};\r\n            color: ${props => props.style ? props.style.optionsItemHoverTxtColor : \"white\"};\r\n\r\n            &:hover{\r\n                color: ${props => props.style ? props.style.optionsItemHoverTxtColor : \"white\"};\r\n            }\r\n        }\r\n        li{\r\n            overflow: hidden;\r\n            width: 100%;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            padding: ${props => props.style ? props.style.generalPadding : \"8px 16px\"};\r\n        }\r\n        li:active, li:focus{\r\n            background-color: ${props => props.style ? props.style.optionsItemHoverBgColor : \"blue\"};\r\n        }\r\n    }\r\n    .closed{\r\n        display: none;\r\n\r\n    }\r\n    .open{\r\n        display: block;\r\n        height: fit-content;\r\n    }\r\n    .dropdown-arrow{\r\n        width: 0;\r\n        height: 0;\r\n        margin-left: ${props => props.style ? \"0\" : \"30px\"};\r\n        border-left: 6px solid transparent;\r\n        border-right: 6px solid transparent;\r\n        border-top: 7px solid transparent;\r\n        border-top-color: ${props => props.style ? props.style.arrowColor : \"grey\"};\r\n        border-top-width: ${props => props.style ? props.style.arrowSize + \"px\" : \"7px\"};\r\n        border-left-width: ${props => props.style ? props.style.arrowSize - 1 + \"px\" : \"7px\"};\r\n        border-right-width: ${props => props.style ? props.style.arrowSize - 1 + \"px\" : \"7px\"};\r\n    }\r\n    .dropdown-mask{\r\n        position: absolute;\r\n        width: 100%;\r\n        background-color: transparent;\r\n        height: 100%;\r\n        left:0;\r\n    }\r\n`\r\n\r\n/**\r\n * @param {object} customStyle css property in object form : Optionnal\r\n * @param {string} idName name to be passed as component id : Mandatory, needed to correctly launch events\r\n * @param {HTMLElement} icon  html element i/img/svg : Optionnal\r\n * @param {Array} options either plain array or array of object : Mandatory \r\n * @param {string} label label field text content : Optionnal\r\n * @param {boolean} scrollable change menu to a scrollable one : Optionnal\r\n * @param {number} searchTimer set a specific timer for the reset of search : Optionnal, a base timer of 1500ms is set by default  \r\n * @param {boolean} isReset props in the form of a boolean to define when comonent should be reset : Optionnal/Mandatory\r\n * @param {string} baseOption Used as the default option\r\n * @param {function} setValue setState of the parent component : Mandatory to control output of component\r\n * \r\n * @returns {Select} React component \r\n */\r\n\r\nfunction Select({ customStyle, idName, icon, options, label, scrollable, searchTimer, isReset, baseOption, setValue }) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [visibleOption, setVisibleOption] = useState(baseOption ? baseOption : options[0].name || options[0])\r\n    const [activeDescendant, setActiveDescendant] = useState(1)\r\n    const [prevActive, setPrevActive] = useState(1)\r\n    const btnRef = useRef()\r\n    const timerRef = useRef()\r\n    const menuRef = useRef()\r\n    let searchArray = []\r\n    defineSearchMaterial()\r\n\r\n    function defineSearchMaterial() {\r\n        options && options.forEach(option => {\r\n            searchArray.push(option.name ? option.name : option)\r\n        });\r\n    }\r\n\r\n    const handleClickAway = (e) => {\r\n        console.log(e.target.tagName)\r\n        if (e.target.tagName === \"HTML\" || e.target.parentNode.parentNode.id != idName) {\r\n            e.target.className != \"option\" && setActiveDescendant(prevActive)\r\n            setIsOpen(false)\r\n        }\r\n        else if (e.target.parentNode.parentNode.id === idName && e.target.className === \"dropdown-mask\") {\r\n            !isOpen && setIsOpen(prev => !prev)\r\n        }\r\n    }\r\n\r\n    function handleMouseOver(e) {\r\n        if (e.target.className === \"option\") {\r\n            e.target.dataset.key && setActiveDescendant(Number(e.target.dataset.key))\r\n        }\r\n    }\r\n\r\n    function handleKeyPress(e) {\r\n        switch (e.target.className) {\r\n            case \"dropdown-btn\":\r\n                if (e.code === \"Space\" | e.code === \"Enter\" | e.key === \" \" | e.key === \"Enter\") {\r\n                    setIsOpen(prev => !prev)\r\n                }\r\n                if (isOpen) {\r\n                    if (e.code === \"ArrowLeft\" || e.code === \"ArrowUp\" || e.key === \"ArrowLeft\" || e.key === \"ArrowUp\") {\r\n                        e.code === \"ArrowUp\" && e.preventDefault()\r\n                        e.code === \"ArrowLeft\" && e.preventDefault()\r\n                        setActiveDescendant(prev => prev > 1 ? prev - 1 : 1)\r\n                        scrollToTarget()\r\n                    }\r\n                    else if (e.code === \"ArrowRight\" | e.code === \"ArrowDown\" || e.key === \"ArrowRight\" || e.key === \"ArrowDown\") {\r\n                        e.code === \"ArrowDown\" && e.preventDefault()\r\n                        e.code === \"ArrowRight\" && e.preventDefault()\r\n                        activeDescendant < options.length && setActiveDescendant(prev => prev < options.length + 1 ? prev + 1 : prev)\r\n                        scrollToTarget()\r\n                    }\r\n                    else if (e.code === \"Space\" || e.code === \"Enter\" || e.key === \" \" || e.key === \"Enter\") {\r\n                        e.code === \"Space\" && e.preventDefault()\r\n                        e.key === \" \" && e.preventDefault()\r\n                        setPrevActive(activeDescendant)\r\n                        setVisibleOption(options[activeDescendant - 1].name || options[activeDescendant - 1])\r\n                        setIsOpen(false)\r\n                        setValue && setValue(e.target.textContent)\r\n                    }\r\n                    else if (e.code === \"Tab\" || e.key === \"Tab\" || e.code === \"Escape\" || e.key === \"Escape\") {\r\n                        setActiveDescendant(prevActive)\r\n                        setVisibleOption(options[prevActive - 1].name || options[prevActive - 1])\r\n                        setIsOpen(false)\r\n                    }\r\n                    else if (e.key.length === 1 && e.key.match(/[a-z]/i)) {\r\n                        let key = e.key\r\n                        updateLs(key)\r\n                        clearTimeout(timerRef.current)\r\n                        search()\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    function scrollToTarget(index) {\r\n        const menuOptions = document.querySelectorAll(`#${idName} ul li`)\r\n        menuOptions[index > 0 ? index - 1 : index <= 0 ? 0 : activeDescendant - 1].scrollIntoViewIfNeeded()\r\n    }\r\n\r\n    function search() {\r\n        const string = localStorage.getItem(`${idName}Search`)\r\n        const index = searchArray.findIndex(el => el.slice(0, string.length).toLowerCase() === string.toLowerCase())\r\n        console.log(index);\r\n        setActiveDescendant(index > 0 ? index + 1 : index === 0 ? 1 : activeDescendant)\r\n\r\n        timerRef.current = setTimeout(() => {\r\n            resetSearch()\r\n        }, searchTimer ? searchTimer : 1000)\r\n        scrollToTarget(index > 0 ? index + 1 : index < 0 ? activeDescendant : 1)\r\n    }\r\n    function updateLs(key) {\r\n        let string = localStorage.getItem(`${idName}Search`)\r\n        string ? string += key : string = key\r\n        localStorage.setItem(`${idName}Search`, string)\r\n    }\r\n\r\n    function resetSearch() {\r\n        localStorage.removeItem(`${idName}Search`)\r\n        clearTimeout(timerRef.current)\r\n    }\r\n\r\n    function handleClickOnItem(e, key) {\r\n        setVisibleOption((e.target.textContent))\r\n        setIsOpen(false)\r\n        setPrevActive(key)\r\n        setActiveDescendant(key)\r\n        setValue && setValue(e.target.dataset.value)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setValue && setValue(options[0].abbreviation ? options[0].abbreviation : options[0])\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        // eslint-disable-next-line no-undef\r\n        isOpen && document.addEventListener(\"click\", handleClickAway)\r\n\r\n        // eslint-disable-next-line no-undef\r\n        return () => document.removeEventListener('click', handleClickAway)\r\n    }, [isOpen])\r\n\r\n    useEffect(() => {\r\n        scrollToTarget(1)\r\n        setVisibleOption(baseOption ? baseOption : options[0].name || options[0])\r\n        setPrevActive(1)\r\n        setActiveDescendant(1)\r\n        setValue(baseOption ? baseOption : options[0].abbreviation || options[0])\r\n    }, [isReset])\r\n    return (\r\n        <CustomSelect id={idName} style={customStyle && customStyle} index={activeDescendant} scrollable={scrollable} onKeyDown={(e) => handleKeyPress(e)} onMouseOver={(e) => handleMouseOver(e)} data-value={options[activeDescendant - 1].abbreviation || options[activeDescendant - 1]}>\r\n            {label && <label htmlFor={idName + \"-btn\"} onClick={() => btnRef.current?.focus()}>{label}</label>}\r\n            <div ref={btnRef} role=\"combobox\" aria-labelledby={`${idName} select`} aria-controls={`${idName}-dropdown-menu`} aria-activedescendant={options[activeDescendant - 1].name || options[activeDescendant - 1]} aria-haspopup={true} id={`${idName}-btn`} aria-expanded={isOpen} aria-owns={`${idName}-dropdown-menu`} className=\"dropdown-btn\" tabIndex=\"0\" ><p>{visibleOption}</p>{icon ? icon : <div className='dropdown-arrow'></div>}<span className='dropdown-mask' onClick={() => {\r\n                setIsOpen((prev) => !prev)\r\n                setActiveDescendant(prevActive)\r\n            }}></span></div>\r\n            <ul ref={menuRef} id={`${idName}-dropdown-menu`} role=\"listbox\" aria-hidden={!isOpen} className={isOpen ? \"options open\" : \"options closed\"}>\r\n                {options && options.map((option, key) => {\r\n                    return <li id={options[key].name || options[key]} key={key} onClick={(e) => {\r\n                        handleClickOnItem(e, key + 1)\r\n                    }}\r\n                        data-key={key + 1} data-value={option.abbreviation || option} className=\"option\" role=\"option\" aria-selected={key + 1 === prevActive ? true : false}>{option.name || option}</li>\r\n                })}\r\n            </ul>\r\n        </CustomSelect>\r\n    )\r\n}\r\n\r\n\r\nexport default Select\r\n"],"names":["CustomSelect","styled","div","_t","_","props","style","scrollBehavior","width","minWidth","labelMargin","labelFontSize","buttonBackground","generalPadding","buttonBorder","fontSize","optionsBorder","optionsBackground","scrollable","optionsMaxHeight","index","optionsItemHoverBgColor","optionsItemHoverTxtColor","arrowColor","arrowSize","Select","customStyle","idName","icon","options","label","searchTimer","isReset","baseOption","setValue","isOpen","setIsOpen","useState","visibleOption","setVisibleOption","name","activeDescendant","setActiveDescendant","prevActive","setPrevActive","btnRef","useRef","timerRef","menuRef","searchArray","defineSearchMaterial","forEach","option","push","handleClickAway","e","console","log","target","tagName","parentNode","id","className","prev","handleMouseOver","dataset","key","Number","handleKeyPress","code","preventDefault","scrollToTarget","length","textContent","match","updateLs","clearTimeout","current","search","menuOptions","document","querySelectorAll","scrollIntoViewIfNeeded","string","localStorage","getItem","findIndex","el","slice","toLowerCase","setTimeout","resetSearch","setItem","removeItem","handleClickOnItem","value","useEffect","abbreviation","addEventListener","removeEventListener","React","createElement","onKeyDown","onMouseOver","htmlFor","onClick","_btnRef$current","focus","ref","role","tabIndex","map"],"mappings":"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"}